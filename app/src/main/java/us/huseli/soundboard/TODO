Too many fast pressings on sound with repress mode restart makes init fail and sound crappy
Sometimes it also crashes:
E/AndroidRuntime: FATAL EXCEPTION: DefaultDispatcher-worker-5
    Process: us.huseli.soundboard.debug, PID: 22523
    java.lang.UnsupportedOperationException: Cannot create AudioTrack
        at android.media.AudioTrack$Builder.build(AudioTrack.java:1033)
        at us.huseli.soundboard.audio.AudioTrackContainer.build(AudioTrackContainer.kt:39)
        at us.huseli.soundboard.audio.AudioFile$PlayActionAbstract.preparePlay$suspendImpl(AudioFile.kt:346)
        at us.huseli.soundboard.audio.AudioFile$PlayActionAbstract.preparePlay(Unknown Source:0)
        at us.huseli.soundboard.audio.AudioFile$RestartAction.preparePlay(AudioFile.kt:429)
        at us.huseli.soundboard.audio.AudioFile$RestartAction$preparePlay$1.invokeSuspend(Unknown Source:11)
        at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)
        at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)
        at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:571)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:678)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:665)

What happens on repress?
SoundPlayer.togglePlay() runs audioFile.restart() in coroutine
    PlayActionAbstract.start()
        AudioExtractor()
        RestartAction.preparePlay()
            extractJob?.cancelAndJoin()
            queuedStopJob?.cancel()
            AudioTrackContainer.flush()
                AudioTrackContainer.stop()
                    audioTrack.pause()
                audioTrack.flush()
            AudioFile.doPrepare()
                extractor.seekTo(0)
                initCodec()
            AudioTrackContainer.awaitPausedState()
            AudioTrackContainer.build()
                AudioTrack.Builder.build()
            AudioTrackContainer.play()
                audioTrack.play()
        extractJob = couroutine:
            loop:
                AudioExtractor.extractBufferEncoded()
                    processInputBuffer()
                        codec.dequeueInputBuffer()
                        codec.getInputBuffer()
                        MediaExtractor.readSampleData()
                        codec.queueInputBuffer()
                        extractor.advance()
                    processOutputBuffer()
                        codec.dequeueOutputBuffer()
                        codec.getOutputBuffer()
                        codec.releaseOutputBuffer()
                AudioTrackContainer.write(buffer)
                    audioTrack.write()




Ripple animation not visible on grey background


Slim down various DB queries (only fetch needed data). Also goes for the SoundWithCategory stuff.
https://developer.android.com/training/data-storage/room/accessing-data#return-subset


Check out Flow:
https://stackoverflow.com/questions/58890105/kotlin-flow-vs-livedata
https://kotlinlang.org/docs/flow.html
https://developer.android.com/training/data-storage/room/async-queries#kotlin
https://medium.com/androiddevelopers/room-flow-273acffe5b57
https://developer.android.com/reference/kotlin/androidx/room/Query


When ALL categories are collapsed, SoundPlayers/AudioFiles are not initializing (maybe not a huge
problem)


Test: Start with some large category collapsed > start profiling > expand it > see what could be
done in BG thread on startup instead
- Looks like it's mainly SoundAdapter.onCreateViewHolder > inflate taking time. So only UI stuff.


Steps to speed up time from click to sound starting playing:
* Intercept the touch event as soon as possible (i.e. in the activity), send straight to play
method without middlemen
* Play on touch event in SoundViewHolder, instead of click event


When collapsing last category, its header disappears from view until you scroll, then reappears.
CategoryAdapter.onViewDetachedFromWindow() is run for that holder and it's hidden. Why?


On ordering enabled: scroll with 2 fingers?


Check for usages of adapterPosition/layoutPosition and correct according to
https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/RecyclerView#positions-in-recyclerview:


Make sure old adapters & viewholders are garbage collected on config change/rotate, they don't seem
to be doing so automatically


Write tests :-//////////////


NON-RECREATED
-------------
In some instance, when creating categories and moving sounds around, an empty category was
populated with another category's sounds (How to recreate?)


After altering a category, play icon & volumebar on sounds dont work? (Cannot recreate?)
